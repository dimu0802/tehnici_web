exports.sharo_debug=!1;var i=function(){function i(e){var o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];!function(e,o){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}(this),this.topic="/blackboard",this.using_ros=!1,this.sharo_model={},exports.sharo_debug=o,console.log("Starting NEP communication");var t=this.sharo_model;this.listener=e.new_sub(this.topic,"json",function(i){if(i.primitive in t)for(var e in i.input)try{t[i.primitive][e].value=i.input[e],t[i.primitive][e].time=performance.now(),t[i.primitive][e].robot=i.robot}catch(o){t[i.primitive][e]={value:0,time:0},t[i.primitive][e].value=i.input[e],t[i.primitive][e].time=performance.now(),t[i.primitive][e].robot=i.robot}else for(var e in console.log("New primitive:"+i.primitive),t[i.primitive]={},i.input)try{t[i.primitive][e].value=i.input[e],t[i.primitive][e].time=performance.now(),t[i.primitive][e].robot=i.robot}catch(o){t[i.primitive][e]={value:0,time:0},t[i.primitive][e].value=i.input[e],t[i.primitive][e].time=performance.now(),t[i.primitive][e].robot=i.robot}}),console.log("...")}var e;return(e=[{key:"setInput",value:function(i){if(i.primitive in this.sharo_model)for(var e in i.input)try{this.sharo_model[i.primitive][e].value=i.input[e],this.sharo_model[i.primitive][e].time=performance.now(),this.sharo_model[i.primitive][e].robot=i.robot}catch(o){this.sharo_model[i.primitive][e]={value:0,time:0},this.sharo_model[i.primitive][e].value=i.input[e],this.sharo_model[i.primitive][e].time=performance.now(),this.sharo_model[i.primitive][e].robot=i.robot}else for(var e in console.log("New primitive:"+i.primitive),this.sharo_model[i.primitive]={},i.input)try{this.sharo_model[i.primitive][e].value=i.input[e],this.sharo_model[i.primitive][e].time=performance.now(),this.sharo_model[i.primitive][e].robot=i.robot}catch(o){this.sharo_model[i.primitive][e]={value:0,time:0},this.sharo_model[i.primitive][e].value=i.input[e],this.sharo_model[i.primitive][e].time=performance.now(),this.sharo_model[i.primitive][e].robot=i.robot}}},{key:"useROS",value:function(i){var e=this.sharo_model;!1===this.using_ros?(this.roslib=new ROSLIB.Ros({url:"ws://"+i+":9090"}),this.roslib.on("connection",function(){console.log("Connected to websocket server.")}),this.roslib.on("error",function(i){console.log("Error connecting to websocket server: ",i)}),this.roslib.on("close",function(){console.log("Connection to websocket server closed.")}),new ROSLIB.Topic({ros:this.roslib,name:this.topic,messageType:"std_msgs/String"}).subscribe(function(i){var o;if((o=JSON.parse(i.data)).primitive in e)for(var t in o.input)try{e[o.primitive][t].value=o.input[t],e[o.primitive][t].time=performance.now(),e[o.primitive][t].robot=o.robot}catch(i){e[o.primitive][t]={value:0,time:0},e[o.primitive][t].value=o.input[t],e[o.primitive][t].time=performance.now(),e[o.primitive][t].robot=o.robot}else for(var t in console.log("New primitive:"+o.primitive),e[o.primitive]={},o.input)try{e[o.primitive][t].value=o.input[t],e[o.primitive][t].time=performance.now(),e[o.primitive][t].robot=o.robot}catch(i){e[o.primitive][t]={value:0,time:0},e[o.primitive][t].value=o.input[t],e[o.primitive][t].time=performance.now(),e[o.primitive][t].robot=o.robot}})):console.log("ros already started")}},{key:"resetBlackboard",value:function(){var i=performance.now();for(var e in this.sharo_model)for(var o in this.sharo_model[e])this.sharo_model[e][o].time=i;console.log(this.sharo_model)}},{key:"getModel",value:function(){return this.sharo_model}}])&&function(i,e){for(var o=0;o<e.length;o++){var t=e[o];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(i,t.key,t)}}(i.prototype,e),i}();exports.sharo_forgot_time=3,exports.Blackboard=i;
//# sourceMappingURL=index.js.map
